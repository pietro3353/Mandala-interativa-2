<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mandala de Cultura Ypê</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .slice-group {
            transition: transform 0.3s ease, opacity 0.3s ease;
            cursor: pointer;
        }

        .slice-group:hover {
            opacity: 0.9;
        }

        .slice-path {
            transition: fill 0.3s ease;
        }

        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Scrollbar customizada para o painel */
        .custom-scroll::-webkit-scrollbar {
            width: 6px;
        }

        .custom-scroll::-webkit-scrollbar-track {
            background: #f1f5f9;
        }

        .custom-scroll::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }

        .custom-scroll::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
    </style>
</head>

<body class="bg-slate-50 min-h-screen flex items-center justify-center p-4">

    <div class="flex flex-col lg:flex-row items-start justify-center gap-8 w-full max-w-7xl">

        <!-- Área da Mandala (SVG) -->
        <div class="relative w-[600px] h-[600px] flex-shrink-0 drop-shadow-xl select-none mx-auto lg:mx-0">
            <svg id="mandala-svg" width="600" height="600" viewBox="0 0 600 600">
                <defs>
                    <filter id="glow" x="-20%" y="-20%" width="140%" height="140%">
                        <feGaussianBlur stdDeviation="3" result="blur" />
                        <feComposite in="SourceGraphic" in2="blur" operator="over" />
                    </filter>
                </defs>
                <!-- Slices serão gerados via JS aqui -->

                <!-- Centro Estático -->
                <circle cx="300" cy="300" r="75" fill="#003399" class="shadow-inner" />
                <text x="300" y="295" text-anchor="middle" fill="white" font-weight="bold" font-size="24"
                    style="font-style: italic; letter-spacing: -1px;">Ypê</text>
                <text x="300" y="320" text-anchor="middle" fill="#FFD700" font-size="10" font-weight="bold"
                    style="letter-spacing: 2px; text-transform: uppercase;">Cultura</text>
            </svg>

            <!-- Tooltip Instrução -->
            <div id="instruction-tooltip"
                class="absolute top-1/2 left-1/2 transform -translate-x-1/2 translate-y-24 bg-white/90 px-4 py-2 rounded-full text-xs text-gray-500 shadow-md pointer-events-none transition-opacity duration-300">
                Passe o mouse nas fatias
            </div>
        </div>

        <!-- Painel de Detalhes -->
        <div id="detail-panel"
            class="flex-1 w-full max-w-md bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden min-h-[500px] flex flex-col transition-all duration-300">
            <!-- Conteúdo será injetado via JS -->
            <div class="h-full flex flex-col items-center justify-center p-10 text-center text-gray-400">
                <i data-lucide="lightbulb" class="w-12 h-12 mb-4 text-yellow-400 opacity-50"></i>
                <h3 class="text-lg font-bold text-gray-600 mb-2">Explore a Cultura Ypê</h3>
                <p class="text-sm">Selecione uma dimensão na mandala para visualizar os valores, métodos e indicadores
                    de sucesso.</p>
            </div>
        </div>
    </div>

    <script>
        // --- DADOS ---
        const data = [
            {
                id: "manufaturar",
                label: "Manufaturar",
                color: "#F6D3C1",
                textColor: "#A84A00",
                iconName: "factory",
                values: ["Qualidade de Ponta a Ponta", "Trabalho com Disciplina", "Honestidade"],
                methods: ["SEY (Sistema de Qualidade)", "Logística 4.0 (CD Automatizado/AGVs)", "S&OP Integrado", "Homologação Técnica"],
                kpis: ["Zero Recall / Bloqueios", "OEE (Eficiência Global)", "OTIF (On Time In Full)", "Saving em Compras"]
            },
            {
                id: "cuidar",
                label: "Cuidar",
                color: "#EBC6E8",
                textColor: "#7D1F76",
                iconName: "heart",
                values: ["Cuidado", "Humildade", "Senso de Dono"],
                methods: ["Ciclo de Gente & PDI", "SAC Humanizado", "Projeto Florestas Ypê", "Gestão de Recursos Hídricos"],
                kpis: ["eNPS (Engajamento)", "Brand Health", "Créditos de Carbono", "Fidelidade / Recompra"]
            },
            {
                id: "projetizar",
                label: "Projetizar",
                color: "#C2E6F2",
                textColor: "#005A75",
                iconName: "zap",
                values: ["Trabalho com Disciplina", "Simplicidade", "Senso de Dono"],
                methods: ["Segurança da Informação", "Metodologia Lean / Kaizen", "Stage-Gate (Inovação)", "Automação de Fluxos"],
                kpis: ["Zero Vazamento de Dados", "Redução de Desperdícios", "% Receita Novos Produtos", "Projetos Implementados"]
            },
            {
                id: "crescer",
                label: "Crescer",
                color: "#D8F0D3",
                textColor: "#1E590F",
                iconName: "trending-up",
                values: ["Senso de Dono", "Qualidade de Ponta a Ponta", "Trabalho com Disciplina"],
                methods: ["Expansão Fabril (Nordeste)", "Gestão de Categoria e Mix", "Relançamento de Marcas", "Gestão Orçamentária (OBZ)"],
                kpis: ["Crescimento Receita Líquida", "Market Share", "EBITDA", "Capacidade Instalada"]
            },
            {
                id: "liderar",
                label: "Liderar",
                color: "#D6EAF8",
                textColor: "#154360",
                iconName: "users",
                values: ["Humildade", "Senso de Dono", "Honestidade"],
                methods: ["Academia de Liderança Ypê", "Inteligência de Mercado", "Liderança pelo Exemplo", "Programa de Embaixadores"],
                kpis: ["Índice de Prontidão (Pipeline)", "Top of Mind", "Reputação ESG", "Aderência aos Valores"]
            },
            {
                id: "servir",
                label: "Servir",
                color: "#D7DBDD",
                textColor: "#424949",
                iconName: "hand-heart",
                values: ["Simplicidade", "Cuidado", "Honestidade"],
                methods: ["JBP com Varejo", "Portal B2B Digital", "Voluntariado Corporativo", "Canal de Compliance"],
                kpis: ["Crescimento Sell-out", "Facilidade de Compra", "Horas de Voluntariado", "Transparência"]
            }
        ];

        // --- VARIÁVEIS DE ESTADO ---
        let activeSliceIndex = null;

        // --- FUNÇÕES AUXILIARES DE GEOMETRIA ---
        const totalSlices = data.length;
        const radius = 180;
        const innerRadius = 80;
        const center = { x: 300, y: 300 };

        function polarToCartesian(centerX, centerY, radius, angleInDegrees) {
            const angleInRadians = (angleInDegrees - 90) * Math.PI / 180.0;
            return {
                x: centerX + (radius * Math.cos(angleInRadians)),
                y: centerY + (radius * Math.sin(angleInRadians))
            };
        }

        function describeDonutSlice(x, y, radius, innerRadius, startAngle, endAngle) {
            const startOuter = polarToCartesian(x, y, radius, endAngle);
            const endOuter = polarToCartesian(x, y, radius, startAngle);
            const startInner = polarToCartesian(x, y, innerRadius, endAngle);
            const endInner = polarToCartesian(x, y, innerRadius, startAngle);
            const largeArcFlag = endAngle - startAngle <= 180 ? "0" : "1";

            return [
                "M", startOuter.x, startOuter.y,
                "A", radius, radius, 0, largeArcFlag, 0, endOuter.x, endOuter.y,
                "L", endInner.x, endInner.y,
                "A", innerRadius, innerRadius, 0, largeArcFlag, 1, startInner.x, startInner.y,
                "Z"
            ].join(" ");
        }

        // --- RENDERIZAÇÃO DA MANDALA ---
        function renderMandala() {
            const svg = document.getElementById('mandala-svg');
            const tooltip = document.getElementById('instruction-tooltip');

            data.forEach((item, index) => {
                const anglePerSlice = 360 / totalSlices;
                const startAngle = index * anglePerSlice;
                const endAngle = startAngle + anglePerSlice;

                // Grupo da fatia
                const group = document.createElementNS("http://www.w3.org/2000/svg", "g");
                group.setAttribute("class", "slice-group");
                group.setAttribute("data-index", index);

                // Path (desenho da fatia)
                const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
                path.setAttribute("d", describeDonutSlice(center.x, center.y, radius, innerRadius, startAngle, endAngle));
                path.setAttribute("fill", item.color);
                path.setAttribute("stroke", "white");
                path.setAttribute("stroke-width", "2");
                path.setAttribute("class", "slice-path");

                // Texto e Ícone
                const textRadius = innerRadius + (radius - innerRadius) / 2;
                const textPos = polarToCartesian(center.x, center.y, textRadius, startAngle + anglePerSlice / 2);

                const foreignObject = document.createElementNS("http://www.w3.org/2000/svg", "foreignObject");
                foreignObject.setAttribute("x", textPos.x - 40);
                foreignObject.setAttribute("y", textPos.y - 30);
                foreignObject.setAttribute("width", "80");
                foreignObject.setAttribute("height", "60");
                foreignObject.setAttribute("style", "pointer-events: none;"); // Permite clique através do texto

                const div = document.createElement("div");
                div.className = "flex flex-col items-center justify-center h-full text-center";
                div.innerHTML = `
                    <div style="color: ${item.textColor};" class="mb-1 transform scale-75 lg:scale-100">
                        <i data-lucide="${item.iconName}" width="24" height="24"></i>
                    </div>
                    <span class="font-bold text-[10px] uppercase tracking-wider" style="color: ${item.textColor};">
                        ${item.label}
                    </span>
                `;
                foreignObject.appendChild(div);

                group.appendChild(path);
                group.appendChild(foreignObject);

                // Eventos
                group.addEventListener('mouseenter', () => {
                    setActiveSlice(index);
                });
                group.addEventListener('click', () => {
                    setActiveSlice(index);
                });

                svg.insertBefore(group, svg.lastElementChild.previousElementSibling); // Insere antes do centro
            });

            lucide.createIcons(); // Inicializa ícones dentro do SVG
        }

        // --- ATUALIZAÇÃO DO PAINEL ---
        function setActiveSlice(index) {
            if (activeSliceIndex === index) return;
            activeSliceIndex = index;

            // Escala visual na mandala
            const slices = document.querySelectorAll('.slice-group');
            slices.forEach((slice, idx) => {
                if (idx === index) {
                    slice.setAttribute("transform", "scale(1.02)");
                    slice.style.transformOrigin = "center";
                } else {
                    slice.setAttribute("transform", "scale(1)");
                }
            });

            // Esconder tooltip
            document.getElementById('instruction-tooltip').style.opacity = '0';

            updatePanelContent(index);
        }

        function updatePanelContent(index) {
            const item = data[index];
            const panel = document.getElementById('detail-panel');

            // HTML do Conteúdo
            const content = `
                <div class="h-full flex flex-col fade-in">
                    <div class="p-6 border-b" style="background-color: ${item.color};">
                        <div class="flex items-center gap-3 mb-2">
                            <div class="p-2 bg-white/50 rounded-lg text-blue-900">
                                <i data-lucide="${item.iconName}" width="24" height="24" style="color: ${item.textColor}"></i>
                            </div>
                            <h2 class="text-2xl font-bold" style="color: ${item.textColor}">
                                ${item.label}
                            </h2>
                        </div>
                        <p class="text-sm font-medium opacity-80" style="color: ${item.textColor}">
                            Dimensão Estratégica
                        </p>
                    </div>

                    <div class="p-6 space-y-6 overflow-y-auto custom-scroll flex-1">
                        <!-- Valores -->
                        <div>
                            <h3 class="flex items-center gap-2 text-sm font-bold text-gray-400 uppercase tracking-wider mb-3">
                                <i data-lucide="shield-check" width="16" height="16"></i>
                                Valores Essenciais
                            </h3>
                            <div class="flex flex-wrap gap-2">
                                ${item.values.map(val => `
                                    <span class="px-3 py-1 bg-slate-100 text-slate-700 rounded-full text-xs font-semibold border border-slate-200">
                                        ${val}
                                    </span>
                                `).join('')}
                            </div>
                        </div>

                        <!-- Métodos -->
                        <div>
                            <h3 class="flex items-center gap-2 text-sm font-bold text-gray-400 uppercase tracking-wider mb-3">
                                <i data-lucide="target" width="16" height="16"></i>
                                Principais Ações (Métodos)
                            </h3>
                            <ul class="space-y-2">
                                ${item.methods.map(method => `
                                    <li class="flex items-start gap-2 text-sm text-gray-600">
                                        <div class="mt-1.5 w-1.5 h-1.5 rounded-full bg-blue-900 flex-shrink-0"></div>
                                        ${method}
                                    </li>
                                `).join('')}
                            </ul>
                        </div>

                        <!-- KPIs -->
                        <div class="bg-blue-50 p-4 rounded-xl border border-blue-100">
                            <h3 class="flex items-center gap-2 text-sm font-bold text-blue-800 uppercase tracking-wider mb-3">
                                <i data-lucide="bar-chart-2" width="16" height="16"></i>
                                Indicadores de Sucesso (KPIs)
                            </h3>
                            <div class="grid grid-cols-1 gap-2">
                                ${item.kpis.map(kpi => `
                                    <div class="flex justify-between items-center text-sm">
                                        <span class="text-blue-700 font-medium">${kpi}</span>
                                        <span class="text-xs bg-white px-2 py-0.5 rounded text-blue-400 border border-blue-100">Alvo</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;

            panel.innerHTML = content;
            lucide.createIcons(); // Renderiza ícones injetados no novo HTML
        }

        // Inicialização
        document.addEventListener('DOMContentLoaded', () => {
            renderMandala();
            lucide.createIcons();
        });

    </script>
</body>


</html>
